
{% extends 'base.html'%}
{% block content %}
<div class="content-section">
  <form method="POST" action="">
      {{ form.hidden_tag() }}
      <fieldset class="form-group">
          <legend class="border-bottom mb-4">{{legend}}</legend>
          <div class="form-group">
              {{ form.title.label(class="form-control-label") }}
              {% if form.title.errors %}
                  {{ form.title(class="form-control form-control-lg is-invalid") }}
                  <div class="invalid-feedback">
                      {% for error in form.title.errors %}
                          <span>{{ error }}</span>
                      {% endfor %}
                  </div>
              {% else %}
                  {{ form.title(class="form-control form-control-lg") }}
              {% endif %}
          </div>
          <div class="form-group">
              {{ form.content.label(class="form-control-label") }}
              {% if form.content.errors %}
                  {{ form.content(class="form-control form-control-lg is-invalid") }}
                  <div class="invalid-feedback">
                      {% for error in form.content.errors %}
                          <span>{{ error }}</span>
                      {% endfor %}
                  </div>
              {% else %}
                  {{ form.content(class="form-control form-control-lg") }}
              {% endif %}
          </div>
          <div class="form-group">
              {{ form.category.label(class="form-control-label") }}
              {% if form.category.errors %}
                  {{ form.category(class="form-control form-control-lg is-invalid") }}
                  <div class="invalid-feedback">
                      {% for error in form.category.errors %}
                          <span>{{ error }}</span>
                      {% endfor %}
                  </div>
              {% else %}
                  {{ form.category(class="form-control form-control-lg") }}
              {% endif %}
          </div>
          <br><br>
      </fieldset>
      <div class="form-group">
          {{ form.submit(class="btn btn-outline-info") }}
      </div>
  </form>
</div>
   <!-- Comments  -->

   <h4>Comments for <span id="comtitle">"{{posts.title}}"</span></h4>
   <div class="content-section">
     {%for comment in comments%}
       {% if comment.pitch_id == post.id %}
       <div style="width: 18rem;">
         <ul class="list-group list-group-light">
           <li class="list-group-item">{{comment.comment}}</li>
         </ul>
         {% if post.author == current_user %}
           <div class="">
             <button type="button" class = "btn btn-danger btn-sm m-1" data-toggle="modal" data-target="#deleteModal" name="button">Delete</button>
           </div>
         {% endif %}

       </div>
       {% endif %}
     {% endfor %}
   </div>



     {{wtf.quick_form(comment_form)}}


   <!-- comments end here -->

   <!-- <textarea name="name" rows="4" cols="50"></textarea>
   <button type="submit" name="button">Comment</button> -->
   {% endif %}

 </div>
 </article>
   <!-- Modal -->
 <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="deleteModalLabel" aria-hidden="true">
   <div class="modal-dialog" role="document">
     <div class="modal-content">
       <div class="modal-header">
         <h5 class="modal-title" id="deleteModalLabel">Delete Post?</h5>
         <button type="button" class="close" data-dismiss="modal" aria-label="Close">
           <span aria-hidden="true">&times;</span>
         </button>
       </div>

       <div class="modal-footer">
         <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
         <form  action="{{url_for('posts.delete_post', post_id = post.id)}}" method="POST">
           <input type="submit" class="btn btn-danger" value="Delete">
         </form>
       </div>
     </div>
   </div>
 </div>

{% endblock %}


